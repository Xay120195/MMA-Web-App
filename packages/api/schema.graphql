type Company {
  id: ID!
  name: String
  address: Address
  users(limit: Int, nextToken: String): CompanyUserConn
  clients(limit: Int, nextToken: String): CompanyClientConn
  matters(limit: Int, nextToken: String): CompanyMatterConn
  clientMatters(
    limit: Int
    nextToken: String
    sortOrder: OrderBy
  ): CompanyClientMatterConn
  phone: String
  email: AWSEmail
  representative: User
  logo: AWSURL
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

enum OrderBy {
  CREATED_DESC
  CREATED_ASC
}

type Address {
  id: ID!
  addressLine1: String
  addressLine2: String
  city: String
  state: String
  zipCode: Int
  country: String
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type CompanyAccessType {
  id: ID
  companyId: ID
  userType: UserType
  access: [Page]
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type User {
  id: ID!
  firstName: String
  lastName: String
  email: AWSEmail
  contactNumber: String
  company: Company
  userType: UserType
  profilePicture: String
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type Page {
  id: ID!
  name: String
  label: String
  route: String
  features: [Feature]
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type ColumnSettings {
  id: ID!
  name: String
  label: String
  tableName: ViewTable
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type Feature {
  id: ID!
  name: String
  label: String
  page: Page
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type File {
  id: ID
  name: String
  size: Int
  type: String
  details: String
  order: Int
  date: AWSDateTime
  labels(limit: Int, nextToken: String): FileLabelConn
  backgrounds(limit: Int, nextToken: String): FileBackgroundConn
  downloadURL: String
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
  isDeleted: Boolean
  nextToken: String
}

type FileLabel {
  id: ID
  file: File
  label: Label
}

type Client {
  id: ID!
  name: String
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type Matter {
  id: ID!
  name: String
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type Label {
  id: ID!
  name: String
  description: String
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type ClientMatter {
  id: ID!
  matter: Matter
  client: Client
  backgrounds(
    limit: Int
    nextToken: String
    sortOrder: OrderBy
  ): ClientMatterBackgroundConn
  labels(limit: Int, nextToken: String): ClientMatterLabelConn
  rfis(limit: Int, nextToken: String): ClientMatterRFIConn
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type Background {
  id: ID
  date: AWSDateTime
  description: String
  order: Int
  files(limit: Int, nextToken: String): BackgroundFileConn
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type RFI {
  id: ID!
  name: String
  description: String
  order: Int
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

type UserColumnSettings {
  id: ID
  userId: ID
  columnSettings: ColumnSettings
  isVisible: Boolean
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
}

schema {
  query: Query
  mutation: Mutation
}

type Query {
  companies: [Company]
  company(id: String): Company
  companyAccessType(companyId: String, userType: UserType): [CompanyAccessType]
  user(id: String): User
  users: [User]
  page(id: ID): Page
  pages: [Page]
  feature(id: String): Feature
  features: [Feature]
  clients: [Client]
  client(id: ID): Client
  clientMatters: [ClientMatter]
  clientMatter(id: ID): ClientMatter
  matters: [Matter]
  matter(id: ID): Matter
  matterFiles(
    matterId: ID
    isDeleted: Boolean
    limit: Int
    nextToken: String
    sortOrder: OrderBy
  ): MatterFileConn
  file(id: ID): File
  files: [File]
  labels: [Label]
  label(id: ID): Label
  rfi(id: ID): RFI
  rfis: [RFI]
  backgrounds: [Background]
  background(id: ID): Background
  columnSettings(tableName: ViewTable): [ColumnSettings]
  userColumnSettings(userId: ID, tableName: ViewTable): [UserColumnSettings]
}

type Mutation {
  companyCreate(name: String, representative: RepresentativeInput): Company
  companyAccessTypeCreate(
    companyId: String
    userType: UserType
    access: [AccessInput]
  ): CompanyAccessType
  userCreate(
    id: ID!
    firstName: String
    lastName: String
    email: AWSEmail
    userType: UserType
    company: CompanyInput
  ): User
  userInvite(
    firstName: String
    lastName: String
    email: AWSEmail
    userType: UserType
    company: CompanyInput
  ): User
  pageCreate(
    name: String
    label: String
    route: String
    features: [FeatureInput]
  ): Page
  featureCreate(name: String, label: String, page: PageInput): Feature
  clientCreate(name: String, companyId: String): Client
  matterCreate(name: String, companyId: String): Matter
  matterFileCreate(
    matterId: ID
    s3ObjectKey: String
    size: Int
    type: String
    name: String
    details: String
    order: Int
  ): File
  matterFileUpdate(
    id: ID
    name: String
    details: String
    order: Int
    date: AWSDateTime
    labels: [LabelInput]
  ): File
  matterFileBulkUpdateOrders(arrangement: [ArrangementInput]): [File]
  matterFileSoftDelete(id: ID): File
  companyAccessTypeUpdate(id: String, access: [AccessInput]): CompanyAccessType
  clientMatterCreate(
    companyId: String
    client: ClientInput
    matter: MatterInput
  ): ClientMatter
  clientMatterDelete(id: ID): ClientMatter
  labelCreate(name: String, clientMatterId: String): Label
  labelUpdate(id: ID, name: String, description: String): Label
  fileLabelTag(file: FileInput, label: [LabelInput]): FileLabel

  backgroundCreate(
    description: String
    date: AWSDateTime
    clientMatterId: String
  ): Background
  backgroundUpdate(
    id: ID
    date: AWSDateTime
    description: String
    order: Int
  ): Background
  backgroundDelete(id: ID): Background
  backgroundBulkDelete(id: [ID]): [Background]
  backgroundBulkUpdateOrders(arrangement: [ArrangementInput]): [Background]
  backgroundFileTag(backgroundId: ID, files: [FileInput]): Background
  columnSettingsCreate(
    name: String
    label: String
    tableName: ViewTable!
  ): ColumnSettings
  userColumnSettingsCreate(
    userId: ID
    columnSettings: [ColumnSettingsInput]
  ): UserColumnSettings
  userColumnSettingsUpdate(id: ID, isVisible: Boolean): UserColumnSettings
  rfiCreate(name: String, clientMatterId: String): RFI
}

enum UserType {
  OWNER
  LEGALADMIN
  BARRISTER
  EXPERT
  CLIENT
  WITNESS
}

enum ViewTable {
  FILEBUCKET
  BACKGROUNDS
}

# Inputs

input ClientMatterInput {
  id: ID
}

input MatterInput {
  id: ID
  name: String
}

input FileInput {
  id: ID
  name: String
}

input ArrangementInput {
  id: ID
  order: Int
}

input ClientInput {
  id: ID
  name: String
}

input LabelInput {
  id: ID
  name: String
  description: String
}

input AccessInput {
  id: ID!
  name: String
  features: [FeatureInput]
}

input FeatureInput {
  id: ID!
  name: String
  label: String
}

input CompanyInput {
  id: ID!
  name: String
}

input PageInput {
  id: ID!
  name: String
}

input RepresentativeInput {
  id: ID!
  firstName: String
  lastName: String
  email: AWSEmail
}

input ColumnSettingsInput {
  id: ID
  tableName: ViewTable
}

# Relationships / Conns

type CompanyUserConn {
  items: [User]
  nextToken: String
}

type CompanyClientConn {
  items: [Client]
  nextToken: String
}

type CompanyMatterConn {
  items: [Matter]
  nextToken: String
}

type CompanyClientMatterConn {
  items: [ClientMatter]
  nextToken: String
}

type ClientMatterBackgroundConn {
  items: [Background]
  nextToken: String
}

type ClientMatterLabelConn {
  items: [Label]
  nextToken: String
}

type FileLabelConn {
  items: [Label]
  nextToken: String
}

type FileBackgroundConn {
  items: [Background]
  nextToken: String
}

type BackgroundFileConn {
  items: [File]
  nextToken: String
}

type ClientMatterRFIConn {
  items: [RFI]
  nextToken: String
}

type MatterFileConn {
  items: [File]
  nextToken: String
}
